\chapter{Background}

Research projects should always be based on previous research on the same and/or related topics. This should be described as a background to the thesis with adequate bibliographical references. If the material needed is too voluminous to fit nicely in the review part of the introduction, it can be presented in a separate background chapter.

\section{Blockchain}
A blockchain is a distributed ledger that is public and immutable. It is a record of transactions that can be verified by a number of parties. The blockchain is a public ledger that is distributed across the internet. Blockchain technology was popularized by Bitcoin in 2008. It enabled users to conduct transactions without the need for a central authority. From Bitcoin sprang several other cryptocurrencies and blockchain platforms such as Ethereum, Litecoin, and Ripple.

\section{Smart Contracts}
The term "\acrlong{sc}" was introduced with the Ethereum platform in 2014. A \acrfull{sc} is a program that is executed on a blockchain, enabling non-trusting parties to create an \textit{agreement}. \acrshort{sc}s have enabled several interesting new concepts, such as \acrfull{nft} and entirely new business models.

\section{Ethereum}
Ethereum is a decentralized platform that allows users to create, store, and transfer digital assets. It is a peer-to-peer network that operates without a central server. Ethereum introduces the concept of smart contracts, which are computer programs that run automatically on the blockchain. Smart contracts are used to automate the creation of new digital assets, such as tokens, and to create new business models.

Solidity is a programming language that is used to write smart contracts. Solidity is a subset of the Ethereum programming language.

\section{Smart Contract Security Vulnerabilities}

There are many vulnerabilities in smart contracts that can be exploited by malicious actors. Throughout the last years, an increase in use of the Ethereum network has led to the development of smart contracts that are vulnerable to attacks. Due to the nature of blockchain technology, the attack surface of smart contracts is different from that of traditional computing systems.

Following is a list of the most common vulnerabilities in smart contracts:

\subsection{Integer Overflow and Underflow}

\subsection{Transaction-Ordering Dependence}
In blockchain systems there is no guarantee on the execution order of transactions. 
\subsection{Stack Size Limit}

\subsection{Timestamp Dependency}
Considering changing to "Block state dependence"

\begin{lstlisting}[
    caption={Timestamp Dependency vulnerabile Solidity \acrlong{sc} code},
    label=lst:timestamp-dependency,
    language=Solidity]
    contract Roulette {
        uint public pastBlockTime; // forces one bet per block
        constructor() external payable {} // initially fund contract
        // fallback function used to make a bet
        function () external payable {
            require(msg.value == 10 ether); // must send 10 ether to play
            require(now != pastBlockTime); // only 1 transaction per block
            pastBlockTime = now;
            if(now % 15 == 0) { // winner
                msg.sender.transfer(this.balance);
            }
        }
    }
\end{lstlisting}


\subsection{Reentrancy}
Reentrancy is a vulnerability that occurs when a smart contract calls external contracts. Most blockchain platforms that implements smart contracts provides some form of external contract calls.

\begin{lstlisting}[
    caption={Timestamp Dependency vulnerabile Solidity \acrlong{sc} code},
    label=lst:timestamp-dependency,
    language=Solidity]
    function withdraw() external {
        uint256 amount = balances[msg.sender];
        require(msg.sender.call.value(amount)());
        balances[msg.sender] = 0;
    }   
\end{lstlisting}

\subsection{Unfair Contracts}

