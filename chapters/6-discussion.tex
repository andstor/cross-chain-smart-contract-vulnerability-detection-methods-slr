\chapter{Discussion}
\label{chap:discussion}

In this \acrfull{slr}, efforts are made to systemize the state-of-the-art research on various blockchain platforms. A total of 40 papers available as of 2021 has been discussed and analyzed. From the findings presented in \cref{chap:results}, we can clearly see that the research of vulnerability analysis of other blockchain platforms than Ethereum is lacking. Even with deliberate efforts for covering other blockchain platforms, almost all research focuses exclusively on the Ethereum blockchain, with some minor exceptions being Hyperledger Fabric. The area of blockchain is immature. Therefore, it is expected that the popularity of Ethereum steals most of the research resources.

\section{Comparison with related work}
Compared to related surveys on the topic of smart contract vulnerability analysis and detection \cite{atzei2017survey, grishchenko2018foundations, liu2019asurvey, singh2020blockchain, huang2019smart, almakhour2020verification, he2020smart, kim2020analysis, vacca2021asystematic, matsumura2021vulnerabilities,wang2021security, peng2021security} (see \cref{chap:related-work}), this study covers a wider range of blockchain platforms. Where most surveys focus on the Ethereum blockchain, this study has deliberately focused on all \acrshort{sc} vulnerability detection tools regardless of the platform used. The closest related work to this study is by \textcite{wang2021security}. The authors provide a survey of security enhancement solutions on smart contracts. The survey addresses most static and dynamic analysis techniques, as well as some deep learning methods. Further, they state they provide a widened scope beyond just Ethereum. Compared to \cite{wang2021security}, this study provides a more up-to-date \acrfull{slr} until 2021. It provides a twice as long list of vulnerability analysis and detection methods, as well as a more detailed analysis of each tool and its capabilities. Further, this study also focuses on the cross-applicability of the various detection methods. A comparison of this \acrshort{slr} and \cite{wang2021security} can be found in \cref{tab:comparison-closely-related-work}.

\begin{ThreePartTable}
    \newcolumntype{Y}{>{\centering\arraybackslash}X}
    \newcolumntype{R}{>{\raggedright\arraybackslash}X}
    \def\arraystretch{1.5}
    \footnotesize
    \begin{center}
    \begin{TableNotes}
        \item[a] \label{tn:num-tools-prerequisite} Papers classified as "Formal verification" or "Privacy enhancing techniques" are not counted as they are not vulnerability detection tools or methods.
    \end{TableNotes}
    \keepXColumns
    \begin{tabularx}{\textwidth}{RXX}
            \caption{Comparison of this \acrshort{slr} with closest related work(\textcite{wang2021security}).}\label{tab:comparison-closely-related-work}\\
            \toprule
            & \textbf{This \acrshort{slr}} & \textbf{\cite{wang2021security}}\\
            \hline
        \endfirsthead
            \caption{(\textit{Continued}) Comparison of this \acrshort{slr} with closest related work(\textcite{wang2021security}).}\\
            \toprule
            & \textbf{This \acrshort{slr}} & \textbf{\cite{wang2021security}}\\
            \hline
        \endhead
            \midrule
            \multicolumn{3}{r}{\small(\textit{Continued on next page})}\\
        \endfoot
            \insertTableNotes\\
        \endlastfoot
        
            Period covered & Until 2021 & Until May 2021\\
            Scientific databases searched & \acrlong{wos} & CM Digital Library\newline IEEE Xplore\newline Elsevier Science Direct\\
            Cross-chain applicability & Yes & No\\
            Ethereum specific scope & No & No\\
            Number of tools identified & 40 & 20\tnotex{tn:num-tools-prerequisite}\\
            Scope & \acrshort{sc} Vulnerability Detection tools and Methods & \acrshort{sc} Security Enhancing Solutions\\
            Categories & Symbolic execution\newline Syntax analysis\newline Abstract interpretation\newline Data flow analysis\newline Fuzzing test\newline Machine learning & Symbolic execution\newline Abstract interpretation\newline Fuzzing test\newline Formal verification\newline Deep learning\newline Privacy enhancing techniques\\
            Table comparison attributes for static and dynamic analysis & Year\newline Main technology\newline Assistive technology\newline Capability\newline Input & Main technology\newline Assistive technology\newline Level\newline Type \\
            Table comparison attributes for \acrshort{ml} & Year\newline Method\newline Feature engineering\newline Capability\newline Input\newline Dataset\newline Dataset availability & NA\\
            Considers \acrshort{ml} datasets & Yes & No\\
            \bottomrule

        \end{tabularx}
    \end{center}

\end{ThreePartTable}


% Comparison of two related works

% Symbolic execution: we: 12, they 5. We miss Osiris
% Abstract interpretation: we: 3, they 5. Same, we have classified Securify and EthIR as symbolic execution.
% Syntax analysis: we: 4, they 0.
% Data flow analysis: we: 4, they 0.
% Fuzzy testing: we: 5, they 5. Same fuzzing tools.
% ML analysis: we: 12, they 5. Same ML tools.

% Total: we: 40, they 20.
% They provide a more overview analysis, includes also Privacy enhancing techniques and Formal verification.
% We focus exclusively on vulnerability detection and analysis, and not preventative techniques.
% They have identified 2 tools (Zeus, Seraph) that is not Ethereum specific.
% We have identified 3 tool (Zeus, Seraph, \cite{yamashita2019potential}) that is not Ethereum specific.
% We have discussion of the cross-chain applicability of the tools, they don't have any.
% We use WoS, they use CM Digital Library, IEEE Xplore and Elsevier Sci-ence Direct.

\section{Threats to Validity}
The search strategy applied poses a likely threat to validity from missing out on or excluding relevant papers. Further, only one database was used for searching. To mitigate this, the search terms were iteratively improved. Further, an extensive snowballing process on references of the selected papers to identify related papers was conducted. During study selection, the researcher's subjective judgment could be a threat. The pre-defined review protocol was strictly followed in order to mitigate this. A widening of the search scope, as well as increasing the number of authors, could provide more relevant publications to complement and result in a more qualified analysis.
